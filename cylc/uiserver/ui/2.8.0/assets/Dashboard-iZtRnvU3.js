import{_ as V,Y as C,Z as x,$ as D,a0 as U,a1 as z,a2 as L,O as A,a3 as $,a4 as H,a5 as I,a6 as T,a7 as q,C as M,e as S,o as W,w as t,g as s,V as g,h as m,z as p,k as c,M as E,a8 as b,a9 as a,aa as r,l as o,ab as n,D as i,t as d,E as k,j as N,ac as B,ad as h,ae as G,I as O}from"./index-EpcknQ5m.js";import{V as v}from"./VDataTable-BirqjyYH.js";import"./VPagination-KiduL2wZ.js";import"./VTable-hoHcQV6C.js";const j='<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>',J='</title><path d="',Q='"/></svg>',R={get svg(){return j+"Jupyter"+J+this.path+Q},path:"M7.157 22.201A1.784 1.799 0 0 1 5.374 24a1.784 1.799 0 0 1-1.784-1.799 1.784 1.799 0 0 1 1.784-1.799 1.784 1.799 0 0 1 1.783 1.799zM20.582 1.427a1.415 1.427 0 0 1-1.415 1.428 1.415 1.427 0 0 1-1.416-1.428A1.415 1.427 0 0 1 19.167 0a1.415 1.427 0 0 1 1.415 1.427zM4.992 3.336A1.047 1.056 0 0 1 3.946 4.39a1.047 1.056 0 0 1-1.047-1.055A1.047 1.056 0 0 1 3.946 2.28a1.047 1.056 0 0 1 1.046 1.056zm7.336 1.517c3.769 0 7.06 1.38 8.768 3.424a9.363 9.363 0 0 0-3.393-4.547 9.238 9.238 0 0 0-5.377-1.728A9.238 9.238 0 0 0 6.95 3.73a9.363 9.363 0 0 0-3.394 4.547c1.713-2.04 5.004-3.424 8.772-3.424zm.001 13.295c-3.768 0-7.06-1.381-8.768-3.425a9.363 9.363 0 0 0 3.394 4.547A9.238 9.238 0 0 0 12.33 21a9.238 9.238 0 0 0 5.377-1.729 9.363 9.363 0 0 0 3.393-4.547c-1.712 2.044-5.003 3.425-8.772 3.425Z"},Y=R.svg.replace(/.*d="(.*)".*/,"$1"),Z=O`
subscription App {
  deltas {
    id
    added {
      ...AddedDelta
    }
    updated (stripNull: true) {
      ...UpdatedDelta
    }
    pruned {
      workflow
    }
  }
}

fragment AddedDelta on Added {
  workflow {
    ...WorkflowData
  }
}

fragment UpdatedDelta on Updated {
  workflow {
    ...WorkflowData
  }
}

fragment WorkflowData on Workflow {
  # NOTE: do not request the "reloaded" event here
  # (it would cause a race condition with the workflow subscription)
  id
  status
}
`,P={name:"Dashboard",mixins:[q],components:{EventChip:T},data(){return{query:new G(Z,{},"root",[],!0,!0)}},computed:{...I("user",["user"]),...H("workflows",["getNodes"]),workflows(){return this.getNodes("workflow")},workflowsTable(){const l=Object.values(this.workflows).map(e=>e.node.status).reduce((e,u)=>(e[u]=(e[u]||0)+1,e),{});return B.enumValues.sort((e,u)=>h.get(e)-h.get(u)).map(e=>({text:e.name.charAt(0).toUpperCase()+e.name.slice(1),count:l[e.name]||0}))},multiUserMode(){return this.user.mode!=="single user"},events(){const l=[];for(const e of this.workflows){const u=e.node?.logRecords||[];for(const w of u)l.push({workflow:e.tokens.workflow,...w})}return l.reverse()}},workflowsHeader:[{value:"count"},{value:"text"}],eventsHeader:[{value:"level"},{value:"workflow"},{value:"message"}],hubUrl:$("/hub/home",!1,!0),icons:{table:A,settings:L,hub:z,quickstart:U,workflow:D,documentation:x,jupyterLogo:Y,mdiGraphql:C}};function F(l,e,u,w,K,f){const _=M("EventChip");return W(),S(N,{fluid:"","grid-list":"",class:"c-dashboard mt-4 py-0 px-6"},{default:t(()=>[s(g,{wrap:""},{default:t(()=>[s(m,{md:"4",lg:"3"},{default:t(()=>[e[2]||(e[2]=p("p",{class:"text-h4 mb-2"},"Workflows",-1)),s(v,{headers:l.$options.workflowsHeader,items:f.workflowsTable,loading:l.isLoading,id:"dashboard-workflows","items-per-page":"-1",style:{"font-size":"1rem"},density:"compact"},{headers:t(()=>e[0]||(e[0]=[])),bottom:t(()=>e[1]||(e[1]=[])),_:1},8,["headers","items","loading"])]),_:1,__:[2]}),s(m,{md:"8",lg:"9"},{default:t(()=>[e[4]||(e[4]=p("p",{class:"text-h4 mb-2"},"Events",-1)),s(v,{headers:l.$options.eventsHeader,items:f.events,"items-per-page":8,density:"compact","data-cy":"events-table"},c({headers:t(()=>[]),"no-data":t(()=>[e[3]||(e[3]=p("td",{class:"text-h6 text-disabled"},"No events",-1))]),"item.level":t(({item:y})=>[s(_,{level:y.level},null,8,["level"])]),_:2},[f.events.length?void 0:{name:"bottom",fn:t(()=>[]),key:"0"}]),1032,["headers","items"])]),_:1,__:[4]})]),_:1}),s(E),s(g,{wrap:""},{default:t(()=>[s(m,{md:"6",lg:"6"},{default:t(()=>[s(b,{lines:"three",class:"pa-0"},{default:t(()=>[s(a,{to:"/workflow-table","data-cy":"workflow-table-link"},{prepend:t(()=>[s(i,{size:"1.6em"},{default:t(()=>[o(d(l.$options.icons.table),1)]),_:1})]),default:t(()=>[s(r,{class:"text-h6 font-weight-light"},{default:t(()=>e[5]||(e[5]=[o(" Workflows Table ",-1)])),_:1,__:[5]}),s(n,null,{default:t(()=>e[6]||(e[6]=[o(" View name, host, version, etc. of your workflows ",-1)])),_:1,__:[6]})]),_:1}),s(a,{to:"/user-profile","data-cy":"user-settings-link"},{prepend:t(()=>[s(i,{size:"1.6em"},{default:t(()=>[o(d(l.$options.icons.settings),1)]),_:1})]),default:t(()=>[s(r,{class:"text-h6 font-weight-light"},{default:t(()=>e[7]||(e[7]=[o(" Settings ",-1)])),_:1,__:[7]}),s(n,null,{default:t(()=>e[8]||(e[8]=[o(" View your Hub permissions, and alter user preferences ",-1)])),_:1,__:[8]})]),_:1}),p("div",null,[s(a,{id:"cylc-hub-button",disabled:!f.multiUserMode,href:l.$options.hubUrl},{prepend:t(()=>[s(i,{size:"1.6em"},{default:t(()=>[o(d(l.$options.icons.hub),1)]),_:1})]),default:t(()=>[s(r,{class:"text-h6 font-weight-light"},{default:t(()=>e[9]||(e[9]=[o(" Cylc Hub ",-1)])),_:1,__:[9]}),s(n,null,{default:t(()=>e[10]||(e[10]=[o(" Visit the Hub to manage your running UI Servers ",-1)])),_:1,__:[10]})]),_:1},8,["disabled","href"]),s(k,{disabled:f.multiUserMode},{default:t(()=>e[11]||(e[11]=[o(" You are not running Cylc UI via Cylc Hub. ",-1)])),_:1,__:[11]},8,["disabled"])]),p("div",null,[s(a,{id:"jupyter-lab-button",disabled:!l.user.extensions?.lab,href:l.user.extensions?.lab,target:"_blank"},{prepend:t(()=>[s(i,{size:"1.6em"},{default:t(()=>[o(d(l.$options.icons.jupyterLogo),1)]),_:1})]),default:t(()=>[s(r,{class:"text-h6 font-weight-light"},{default:t(()=>e[12]||(e[12]=[o(" Jupyter Lab ",-1)])),_:1,__:[12]}),s(n,null,{default:t(()=>e[13]||(e[13]=[o(" Open Jupyter Lab in a new browser tab. ",-1)])),_:1,__:[13]})]),_:1},8,["disabled","href"]),s(k,{disabled:l.user.extensions?.lab},{default:t(()=>e[14]||(e[14]=[o(" Jupyter Lab is not installed. ",-1)])),_:1,__:[14]},8,["disabled"])])]),_:1})]),_:1}),s(m,{md:"6",lg:"6"},{default:t(()=>[s(b,{lines:"three",class:"pa-0"},{default:t(()=>[s(a,{to:"/guide","data-cy":"quickstart-link"},{prepend:t(()=>[s(i,{size:"1.6em"},{default:t(()=>[o(d(l.$options.icons.quickstart),1)]),_:1})]),default:t(()=>[s(r,{class:"text-h6 font-weight-light"},{default:t(()=>e[15]||(e[15]=[o(" Cylc UI Quickstart ",-1)])),_:1,__:[15]}),s(n,null,{default:t(()=>e[16]||(e[16]=[o(" Learn how to use the Cylc UI ",-1)])),_:1,__:[16]})]),_:1}),s(a,{href:"https://cylc.github.io/cylc-doc/stable/html/workflow-design-guide/index.html",target:"_blank"},{prepend:t(()=>[s(i,{size:"1.6em"},{default:t(()=>[o(d(l.$options.icons.workflow),1)]),_:1})]),default:t(()=>[s(r,{class:"text-h6 font-weight-light"},{default:t(()=>e[17]||(e[17]=[o(" Workflow Design Guide ",-1)])),_:1,__:[17]}),s(n,null,{default:t(()=>e[18]||(e[18]=[o(" How to make complex Cylc workflows and Rose suites simpler and easier to maintain ",-1)])),_:1,__:[18]})]),_:1}),s(a,{href:"https://cylc.github.io/cylc-doc/stable/html/index.html",target:"_blank"},{prepend:t(()=>[s(i,{size:"1.6em"},{default:t(()=>[o(d(l.$options.icons.documentation),1)]),_:1})]),default:t(()=>[s(r,{class:"text-h6 font-weight-light"},{default:t(()=>e[19]||(e[19]=[o(" Documentation ",-1)])),_:1,__:[19]}),s(n,null,{default:t(()=>e[20]||(e[20]=[o(" The complete Cylc documentation ",-1)])),_:1,__:[20]})]),_:1}),s(a,{to:"/graphiql"},{prepend:t(()=>[s(i,{size:"1.6em"},{default:t(()=>[o(d(l.$options.icons.mdiGraphql),1)]),_:1})]),default:t(()=>[s(r,{class:"text-h6 font-weight-light"},{default:t(()=>e[21]||(e[21]=[o(" GraphiQL ",-1)])),_:1,__:[21]}),s(n,null,{default:t(()=>e[22]||(e[22]=[o(" Explore the Cylc GraphQL API ",-1)])),_:1,__:[22]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const oe=V(P,[["render",F]]);export{oe as default};
