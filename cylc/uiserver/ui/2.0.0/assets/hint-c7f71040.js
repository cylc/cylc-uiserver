import{X as h}from"./index-4d6c7840.js";import{a as O}from"./codemirror-ab5992a1.js";import{r as _}from"./index-7237f96f.js";import{f as j}from"./forEachState-70d7ef00.js";function V(n,i){for(var e=0;e<i.length;e++){const r=i[e];if(typeof r!="string"&&!Array.isArray(r)){for(const t in r)if(t!=="default"&&!(t in n)){const a=Object.getOwnPropertyDescriptor(r,t);a&&Object.defineProperty(n,t,a.get?a:{enumerable:!0,get:()=>r[t]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var v={},y={};Object.defineProperty(y,"__esModule",{value:!0});function D(n,i,e){var r=N(e,g(i.string));if(r){var t=i.type!==null&&/"|\w/.test(i.string[0])?i.start:i.end;return{list:r,from:{line:n.line,ch:t},to:{line:n.line,ch:i.end}}}}y.default=D;function N(n,i){if(!i)return d(n,function(a){return!a.isDeprecated});var e=n.map(function(a){return{proximity:P(g(a.text),i),entry:a}}),r=d(d(e,function(a){return a.proximity<=2}),function(a){return!a.entry.isDeprecated}),t=r.sort(function(a,l){return(a.entry.isDeprecated?1:0)-(l.entry.isDeprecated?1:0)||a.proximity-l.proximity||a.entry.text.length-l.entry.text.length});return t.map(function(a){return a.entry})}function d(n,i){var e=n.filter(i);return e.length===0?n:e}function g(n){return n.toLowerCase().replace(/\W/g,"")}function P(n,i){var e=T(i,n);return n.length>i.length&&(e-=n.length-i.length-1,e+=n.indexOf(i)===0?0:.5),e}function T(n,i){var e,r,t=[],a=n.length,l=i.length;for(e=0;e<=a;e++)t[e]=[e];for(r=1;r<=l;r++)t[0][r]=r;for(e=1;e<=a;e++)for(r=1;r<=l;r++){var u=n[e-1]===i[r-1]?0:1;t[e][r]=Math.min(t[e-1][r]+1,t[e][r-1]+1,t[e-1][r-1]+u),e>1&&r>1&&n[e-1]===i[r-2]&&n[e-2]===i[r-1]&&(t[e][r]=Math.min(t[e][r],t[e-2][r-2]+u))}return t[a][l]}var m=h&&h.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(v,"__esModule",{value:!0});var c=m(O),o=_,G=m(j),p=m(y);c.default.registerHelper("hint","graphql-variables",function(n,i){var e=n.getCursor(),r=n.getTokenAt(e),t=M(e,r,i);return t!=null&&t.list&&t.list.length>0&&(t.from=c.default.Pos(t.from.line,t.from.ch),t.to=c.default.Pos(t.to.line,t.to.ch),c.default.signal(n,"hasCompletion",n,t,r)),t});function M(n,i,e){var r=i.state.kind==="Invalid"?i.state.prevState:i.state,t=r.kind,a=r.step;if(t==="Document"&&a===0)return(0,p.default)(n,i,[{text:"{"}]);var l=e.variableToType;if(l){var u=S(l,i.state);if(t==="Document"||t==="Variable"&&a===0){var b=Object.keys(l);return(0,p.default)(n,i,b.map(function(f){return{text:'"'.concat(f,'": '),type:l[f]}}))}if((t==="ObjectValue"||t==="ObjectField"&&a===0)&&u.fields){var x=Object.keys(u.fields).map(function(f){return u.fields[f]});return(0,p.default)(n,i,x.map(function(f){return{text:'"'.concat(f.name,'": '),type:f.type,description:f.description}}))}if(t==="StringValue"||t==="NumberValue"||t==="BooleanValue"||t==="NullValue"||t==="ListValue"&&a===1||t==="ObjectField"&&a===2||t==="Variable"&&a===2){var s=u.type?(0,o.getNamedType)(u.type):void 0;if(s instanceof o.GraphQLInputObjectType)return(0,p.default)(n,i,[{text:"{"}]);if(s instanceof o.GraphQLEnumType){var L=s.getValues();return(0,p.default)(n,i,L.map(function(f){return{text:'"'.concat(f.name,'"'),type:s,description:f.description}}))}else if(s===o.GraphQLBoolean)return(0,p.default)(n,i,[{text:"true",type:o.GraphQLBoolean,description:"Not false."},{text:"false",type:o.GraphQLBoolean,description:"Not true."}])}}}function S(n,i){var e={type:null,fields:null};return(0,G.default)(i,function(r){if(r.kind==="Variable")e.type=n[r.name];else if(r.kind==="ListValue"){var t=e.type?(0,o.getNullableType)(e.type):void 0;e.type=t instanceof o.GraphQLList?t.ofType:null}else if(r.kind==="ObjectValue"){var a=e.type?(0,o.getNamedType)(e.type):void 0;e.fields=a instanceof o.GraphQLInputObjectType?a.getFields():null}else if(r.kind==="ObjectField"){var l=r.name&&e.fields?e.fields[r.name]:null;e.type=l==null?void 0:l.type}}),e}const $=V({__proto__:null,default:v},[v]);export{$ as h};
